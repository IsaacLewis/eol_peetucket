<html>
    <head>
        <title>Data Objects Curated</title>
    </head>
    <body>


    <table class="results_table">
        <thead align="center">
        <tr align="center">
            <th><p>Objects Curated </p></th>
            <td>&nbsp;&nbsp;&nbsp;Curator: <%= h @user.given_name %> <%= h @user.family_name %> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <%= link_to 'Back to profile',{:controller=>'/account', :action=>:show, :id => @user.id} %></td>                        
        </tr>
        </thead>
    </table>
    
    <!--
    <% @data_object_ids.each do |post|  -%>
      <%= post.id%> <%= @data_object_ids.length %> <br>
    <% end -%>
    --->

<% if @posts.nil? == false && @posts.size > 0 %>

        
    <%= will_paginate @posts %>
    <table class="results_table">
        <thead align="center">
        <tr align="center">
            <th>Object ID</th>                        
            <th>Data Type</th>
            <th>Activity</th>
            <th>Scientific Name</th>
            <th>Vetted</th>
            <th>Visible</th>
            <th>Description</th>                        
        </tr>
        </thead>
        <tbody>
        <% count = 0 %>        
        <% @posts.each do |post|  -%>
            <% 
            column_class=cycle('odd','even')
            count += 1
            if (post.taxon_concept_id) then
                concept = TaxonConcept.find(post.taxon_concept_id)
                name = concept.quick_scientific_name(:italicized)
            else
                name=""
            end
            %>
            <tr>
                <td class="<%=column_class%>">
                     <%= post.id %>
                      </td>
                <td class="<%=column_class%>"><%= post.datatype %></td>
                      
                      <td class="<%=column_class%>">                                   
                           <%= @object_ids_activity.fetch("#{post.id}",0) %>                                   
                      </td>
                      
                <td class="<%=column_class%>"><i>
                    <%= link_to name,{:controller=>'/taxa', :action=>:show, :id => post.taxon_concept_id} %></i>
                    <% if(!post.published) then %>                                   
                       *
                    <% end %>
                </td>                            
                <td class="<%=column_class%>"><%= post.vetted_label %></td>
                <td class="<%=column_class%>"><%= post.visible %></td>                            
                <td class="<%=column_class%>">                                                       
                    <% if(post.object_cache_url) %>                                   
                        <% url = post.object_cache_url.to_s    #2008/10/06/13/93618
                           url = "http://content8.eol.org/content/" + url[0,4] + "/" + url[4,2] + "/" + url[6,2] + "/" + url[8,2] + "/" + url[10,5] + "_small.jpg"
                        %>                                   
                        <img src="<%= url %>">
                     <% end %>
					 <%= post.description %>
                </td>                                        
            </tr>        
        <% end -%>
        </tbody>
        <tr><td colspan="5"><%= will_paginate @posts %></td></tr>
    </table>

<% end %>
    
    </body>
</html>
